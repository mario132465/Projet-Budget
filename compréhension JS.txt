ðŸ” Initialisation

document.addEventListener("DOMContentLoaded", () => {
â†’ Le navigateur exÃ©cute le code une fois la page chargÃ©e.

ðŸ” DÃ©tection de page

const isHomePage = document.body.contains(document.querySelector(".summary"));
â†’ Le script vÃ©rifie si la page est la page dâ€™accueil.


const isDepensePage = document.title.includes("DÃ©pense");
â†’ Le script vÃ©rifie si la page est celle des dÃ©penses.


const isRevenuPage = document.title.includes("Revenu");
â†’ Le script vÃ©rifie si la page est celle des revenus.

ðŸ’¾ Fonctions localStorage

const getData = (key) => JSON.parse(localStorage.getItem(key)) || [];
â†’ La fonction rÃ©cupÃ¨re les donnÃ©es du stockage local.


const saveData = (key, data) => localStorage.setItem(key, JSON.stringify(data));
â†’ La fonction enregistre des donnÃ©es dans le stockage local.

ðŸ  Si on est sur la page d'accueil

if (isHomePage) {
â†’ Le script exÃ©cute le bloc si on est sur la page dâ€™accueil.


const revenus = getData("revenus");
â†’ Le script rÃ©cupÃ¨re les revenus depuis le stockage local.


const depenses = getData("depenses");
â†’ Le script rÃ©cupÃ¨re les dÃ©penses depuis le stockage local.


const totalRevenus = revenus.reduce((sum, item) => sum + item.montant, 0);
â†’ Le script additionne tous les montants des revenus.


const totalDepenses = depenses.reduce((sum, item) => sum + item.montant, 0);
â†’ Le script additionne tous les montants des dÃ©penses.


const solde = totalRevenus - totalDepenses;
â†’ Le script calcule la diffÃ©rence entre revenus et dÃ©penses.


const cards = document.querySelectorAll(".card p");
â†’ Le script sÃ©lectionne les paragraphes dans les cartes.


cards[0].textContent = totalRevenus.toLocaleString() + " F CFA";
â†’ Le script affiche le total des revenus formatÃ©.


cards[1].textContent = totalDepenses.toLocaleString() + " F CFA";
â†’ Le script affiche le total des dÃ©penses formatÃ©.


cards[2].textContent = solde.toLocaleString() + " F CFA";
â†’ Le script affiche le solde formatÃ©.

ðŸ“‹ Affichage des lignes

const depTable = document.querySelectorAll("table tbody")[0];
â†’ Le script sÃ©lectionne le tableau des dÃ©penses.


const revTable = document.querySelectorAll("table tbody")[1];
â†’ Le script sÃ©lectionne le tableau des revenus.

âž• Affichage des dÃ©penses

depenses.forEach((item, index) => {
â†’ Le script parcourt chaque dÃ©pense.


const row = `<tr>...`;
â†’ Le script crÃ©e une ligne HTML pour la dÃ©pense.


depTable.insertAdjacentHTML("beforeend", row);
â†’ Le script ajoute la ligne dans le tableau des dÃ©penses.

âž• Affichage des revenus

revenus.forEach((item, index) => {
â†’ Le script parcourt chaque revenu.


const row = `<tr>...`;
â†’ Le script crÃ©e une ligne HTML pour le revenu.


revTable.insertAdjacentHTML("beforeend", row);
â†’ Le script ajoute la ligne dans le tableau des revenus.

âŒ Supprimer un Ã©lÃ©ment

window.supprimer = (key, index) => {
â†’ Le script dÃ©finit une fonction pour supprimer un Ã©lÃ©ment.


const data = getData(key);
â†’ La fonction rÃ©cupÃ¨re les donnÃ©es selon la clÃ©.


data.splice(index, 1);
â†’ La fonction retire lâ€™Ã©lÃ©ment Ã  lâ€™index donnÃ©.


saveData(key, data);
â†’ La fonction met Ã  jour les donnÃ©es dans le stockage.


location.reload();
â†’ La fonction recharge la page.

ðŸ“ Si on est sur un formulaire

if (isDepensePage || isRevenuPage) {
â†’ Le script vÃ©rifie si on est sur une page formulaire.


const form = document.querySelector("form");
â†’ Le script sÃ©lectionne le formulaire.


form.addEventListener("submit", (e) => {
â†’ Le script Ã©coute lâ€™envoi du formulaire.


e.preventDefault();
â†’ Le script empÃªche lâ€™envoi automatique du formulaire.

ðŸ§  Traitement des champs

const titre = form.querySelector("input[type=text]").value.trim();
â†’ Le script lit et nettoie le titre saisi.


const montantStr = form.querySelectorAll("input[type=text]")[1].value.trim();
â†’ Le script lit et nettoie le montant saisi.


const montant = parseInt(montantStr.replace(/[^\d]/g, ""), 10);
â†’ Le script extrait le nombre du montant.


if (!titre || isNaN(montant)) {
  alert("Veuillez entrer des donnÃ©es valides.");
  return;
}
â†’ Le script affiche une alerte si les champs sont invalides.

âœ… Sauvegarde des donnÃ©es

const item = { titre, montant };
â†’ Le script crÃ©e un objet Ã  enregistrer.


const key = isDepensePage ? "depenses" : "revenus";
â†’ Le script choisit la bonne clÃ© selon la page.


const data = getData(key);
â†’ Le script rÃ©cupÃ¨re la liste actuelle.


data.push(item);
â†’ Le script ajoute le nouvel Ã©lÃ©ment.


saveData(key, data);
â†’ Le script sauvegarde la nouvelle liste.


window.location.href = "index.html";
â†’ Le script redirige vers la page dâ€™accueil.